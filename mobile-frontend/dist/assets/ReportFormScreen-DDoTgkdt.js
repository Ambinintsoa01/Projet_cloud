import{y as E,z as K,u as ke,o as Ie,H as Ee,c as _,w as r,a as o,I as Se,t as _e,b as Be,d as v,e as s,K as se,L as V,V as q,q as x,i as P,M as J,l as w,g as u,A as $,s as U,F as re,B as ie,n as ue,m as B,f as ce,r as de,C as X,D as Z,j as Pe,p as D,a0 as Ke,k as Me,a1 as Qe,a2 as Ae,_ as xe,Q as Ue,x as De}from"./index-vCZlUi6s.js";import{L as R}from"./leaflet-src-C8Aqtbpj.js";import{u as Le}from"./useSignalements-Bl-XL2BA.js";import{u as Re}from"./useProblemes-BKKAK_Nt.js";import{W as Fe,C as ee,r as Ge,a as Te}from"./useGeolocation-Dbssxn1j.js";import{_ as Ye}from"./_plugin-vue_export-helper-DlAUqK2U.js";var L;(function(C){C.Prompt="PROMPT",C.Camera="CAMERA",C.Photos="PHOTOS"})(L||(L={}));var O;(function(C){C.Rear="REAR",C.Front="FRONT"})(O||(O={}));var te;(function(C){C.Uri="uri",C.Base64="base64",C.DataUrl="dataUrl"})(te||(te={}));class je extends Fe{async getPhoto(n){return new Promise(async(c,a)=>{if(n.webUseInput||n.source===L.Photos)this.fileInputExperience(n,c,a);else if(n.source===L.Prompt){let l=document.querySelector("pwa-action-sheet");l||(l=document.createElement("pwa-action-sheet"),document.body.appendChild(l)),l.header=n.promptLabelHeader||"Photo",l.cancelable=!1,l.options=[{title:n.promptLabelPhoto||"From Photos"},{title:n.promptLabelPicture||"Take Picture"}],l.addEventListener("onSelection",async p=>{p.detail===0?this.fileInputExperience(n,c,a):this.cameraExperience(n,c,a)})}else this.cameraExperience(n,c,a)})}async pickImages(n){return new Promise(async(c,a)=>{this.multipleFileInputExperience(c,a)})}async cameraExperience(n,c,a){if(customElements.get("pwa-camera-modal")){const l=document.createElement("pwa-camera-modal");l.facingMode=n.direction===O.Front?"user":"environment",document.body.appendChild(l);try{await l.componentOnReady(),l.addEventListener("onPhoto",async p=>{const m=p.detail;m===null?a(new ee("User cancelled photos app")):m instanceof Error?a(m):c(await this._getCameraPhoto(m,n)),l.dismiss(),document.body.removeChild(l)}),l.present()}catch{this.fileInputExperience(n,c,a)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(n,c,a)}fileInputExperience(n,c,a){let l=document.querySelector("#_capacitor-camera-input");const p=()=>{var m;(m=l.parentNode)===null||m===void 0||m.removeChild(l)};l||(l=document.createElement("input"),l.id="_capacitor-camera-input",l.type="file",l.hidden=!0,document.body.appendChild(l),l.addEventListener("change",m=>{const y=l.files[0];let I="jpeg";if(y.type==="image/png"?I="png":y.type==="image/gif"&&(I="gif"),n.resultType==="dataUrl"||n.resultType==="base64"){const k=new FileReader;k.addEventListener("load",()=>{if(n.resultType==="dataUrl")c({dataUrl:k.result,format:I});else if(n.resultType==="base64"){const f=k.result.split(",")[1];c({base64String:f,format:I})}p()}),k.readAsDataURL(y)}else c({webPath:URL.createObjectURL(y),format:I}),p()}),l.addEventListener("cancel",m=>{a(new ee("User cancelled photos app")),p()})),l.accept="image/*",l.capture=!0,n.source===L.Photos||n.source===L.Prompt?l.removeAttribute("capture"):n.direction===O.Front?l.capture="user":n.direction===O.Rear&&(l.capture="environment"),l.click()}multipleFileInputExperience(n,c){let a=document.querySelector("#_capacitor-camera-input-multiple");const l=()=>{var p;(p=a.parentNode)===null||p===void 0||p.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input-multiple",a.type="file",a.hidden=!0,a.multiple=!0,document.body.appendChild(a),a.addEventListener("change",p=>{const m=[];for(let y=0;y<a.files.length;y++){const I=a.files[y];let k="jpeg";I.type==="image/png"?k="png":I.type==="image/gif"&&(k="gif"),m.push({webPath:URL.createObjectURL(I),format:k})}n({photos:m}),l()}),a.addEventListener("cancel",p=>{c(new ee("User cancelled photos app")),l()})),a.accept="image/*",a.click()}_getCameraPhoto(n,c){return new Promise((a,l)=>{const p=new FileReader,m=n.type.split("/")[1];c.resultType==="uri"?a({webPath:URL.createObjectURL(n),format:m,saved:!1}):(p.readAsDataURL(n),p.onloadend=()=>{const y=p.result;c.resultType==="dataUrl"?a({dataUrl:y,format:m,saved:!1}):a({base64String:y.split(",")[1],format:m,saved:!1})},p.onerror=y=>{l(y)})})}async checkPermissions(){if(typeof navigator>"u"||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch{throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}const F=Ge("Camera",{web:()=>new je});function He(){const C=E(!1),n=E(!1),c=E(null),a=E([]),l=E({quality:80,allowEditing:!1,resultType:te.DataUrl,source:L.Camera,width:1024,height:1024,preserveAspectRatio:!0}),p=K(()=>!0),m=K(()=>C.value&&p.value&&a.value.length<3),y=K(()=>a.value.length),I=3,k=()=>{C.value=!!F},f=async()=>{try{if(F){const d=await F.requestPermissions();return d.camera==="granted"&&d.photos==="granted"}return!1}catch(d){return c.value="Erreur lors de la demande de permissions cam√©ra",console.error("Erreur permissions cam√©ra:",d),!1}},Y=async(d={})=>{if(!m.value)return c.value="Impossible de prendre une photo",null;n.value=!0,c.value=null;try{if(!F){console.log("üì∏ Simulation de prise de photo (mode d√©veloppement)");const S={id:`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,dataUrl:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAIAAoDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==",fileName:`photo_${Date.now()}.jpg`,timestamp:new Date().toISOString(),isFromGallery:!1};return a.value.push(S),S}const i=await F.getPhoto({...l.value,...d}),h={id:`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,dataUrl:i.dataUrl,fileName:`photo_${Date.now()}.jpg`,timestamp:new Date().toISOString(),isFromGallery:!1,format:i.format,exif:i.exif};return a.value.push(h),h}catch(i){c.value=i.message||"Erreur lors de la prise de photo",console.warn("‚ö†Ô∏è Prise de photo √©chou√©e, cr√©ation d'une photo mock");const h={id:`photo_fallback_${Date.now()}`,dataUrl:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAIAAoDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==",fileName:`photo_fallback_${Date.now()}.jpg`,timestamp:new Date().toISOString(),isFromGallery:!1};return a.value.push(h),h}finally{n.value=!1}},G=async(d={})=>{if(!m.value)return c.value="Impossible de s√©lectionner une photo",null;n.value=!0,c.value=null;try{if(!F){console.log("üñºÔ∏è Simulation de s√©lection depuis la galerie");const S={id:`gallery_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,dataUrl:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAIAAoDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAhEAACAQMDBQAAAAAAAAAAAAABAgMABAUGIWGRkqGx0f/EABUBAQEAAAAAAAAAAAAAAAAAAAMF/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAECEgMRkf/aAAwDAQACEQMRAD8AltJagyeH0AthI5xdrLcNM91BF5pX2HaH9bcfaSXWGaRmknyJckliyjqTzSlT54b6bk+h0R//2Q==",fileName:`gallery_${Date.now()}.jpg`,timestamp:new Date().toISOString(),isFromGallery:!0};return a.value.push(S),S}const i=await F.getPhoto({...l.value,source:L.Photos,...d}),h={id:`gallery_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,dataUrl:i.dataUrl,fileName:`gallery_${Date.now()}.jpg`,timestamp:new Date().toISOString(),isFromGallery:!0,format:i.format,exif:i.exif};return a.value.push(h),h}catch(i){return c.value=i.message||"Erreur lors de la s√©lection de photo",console.error("Erreur s√©lection galerie:",i),null}finally{n.value=!1}},M=d=>{const i=a.value.findIndex(h=>h.id===d);return i>-1?(a.value.splice(i,1),!0):!1},T=()=>{a.value=[]},j=d=>{if(d.dataUrl){const i=atob(d.dataUrl.split(",")[1]),h=d.dataUrl.split(",")[0].split(":")[1].split(";")[0],S=new ArrayBuffer(i.length),t=new Uint8Array(S);for(let b=0;b<i.length;b++)t[b]=i.charCodeAt(b);return new File([t],d.fileName,{type:h})}return null},H=(d,i)=>{const h=a.value.splice(d,1)[0];a.value.splice(i,0,h)};return k(),{isSupported:C,isLoading:n,error:c,photos:a,cameraOptions:l,hasPermission:p,canTakePhoto:m,photoCount:y,maxPhotos:I,checkSupport:k,requestPermissions:f,takePhoto:Y,selectFromGallery:G,removePhoto:M,clearPhotos:T,getPhotoFile:j,reorderPhotos:H}}const Ne={class:"progress-container"},Oe={class:"progress-bar"},Ve={class:"step-indicators"},qe={key:0},$e={key:1},ze={class:"step-label"},We={key:0,class:"step-container"},Je={class:"location-options"},Xe={class:"address-section"},Ze={key:0,class:"coordinates-info"},et={key:1,class:"step-container"},tt={key:0,class:"selected-type-card"},at={class:"type-info"},ot={class:"info-box"},lt={class:"picker-actions"},nt={__name:"ReportFormScreen",setup(C){const n=Be(),c=ke(),{signalementTypes:a,loadSignalementTypes:l,createSignalement:p}=Le(),{createProbleme:m}=Re(),{getCurrentPosition:y}=Te(),{photos:I,clearPhotos:k}=He(),f=E(1),Y=E(!1),G=E(!1),M=E(!1),T=K(()=>{var A,e;return((e=(A=c.user)==null?void 0:A.roles)==null?void 0:e.includes("MANAGER"))||!1}),j=E(null),H=E(null);let d=null,i=null,h=null,S=null;const t=E({latitude:null,longitude:null,addressComplement:"",typeId:null,description:"",surfaceM2:null,budget:null,entrepriseConcernee:"",isAnonymous:!1}),b=E({}),pe=K(()=>f.value/2*100),me=K(()=>({1:"Localisation",2:"Description"})[f.value]),ae=K(()=>{switch(f.value){case 1:return t.value.latitude&&t.value.longitude;case 2:return t.value.description&&Object.keys(b.value).length===0;default:return!1}}),oe=K(()=>t.value.latitude&&t.value.longitude&&t.value.description&&Object.keys(b.value).length===0),N=K(()=>a.value.find(A=>A.id===t.value.typeId)),z=A=>({red:"#dc3545",green:"#28a745",blue:"#007bff",yellow:"#ffc107",orange:"#fd7e14",purple:"#6f42c1","red-white":"#dc3545"})[A]||"#6c757d",ge=()=>{ae.value&&f.value<3&&f.value++},fe=()=>{f.value>1&&f.value--},ve=A=>{const e={};(!t.value.description||t.value.description.trim().length<3)&&(e.description="La description doit contenir au moins 3 caract√®res"),b.value={...b.value,...e},e[A]===void 0&&delete b.value[A]},he=async()=>{G.value=!0;try{const A=await y();t.value.latitude=A.coords.latitude,t.value.longitude=A.coords.longitude,le(),await Q("Position d√©finie avec succ√®s","success")}catch(A){console.error("Erreur de g√©olocalisation:",A),await Q("Impossible d'obtenir votre position","danger")}finally{G.value=!1}},ye=()=>{Y.value=!0,setTimeout(()=>{be()},300)},W=()=>{Y.value=!1,i&&(i.remove(),i=null)},Ce=()=>{if(S){const A=S.getLatLng();t.value.latitude=A.lat,t.value.longitude=A.lng,le(),W(),Q("Emplacement confirm√©","success")}},le=()=>{d||ne(),h?h.setLatLng([t.value.latitude,t.value.longitude]):h=R.marker([t.value.latitude,t.value.longitude]).addTo(d),d.setView([t.value.latitude,t.value.longitude],15)},ne=()=>{!j.value||d||(d=R.map(j.value).setView([18.8792,47.5079],13),R.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap contributors"}).addTo(d),t.value.latitude&&t.value.longitude&&(h=R.marker([t.value.latitude,t.value.longitude]).addTo(d),d.setView([t.value.latitude,t.value.longitude],15)))},be=()=>{if(!H.value||i)return;i=R.map(H.value).setView([18.8792,47.5079],13),R.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:"&copy; OpenStreetMap contributors"}).addTo(i);const A=t.value.latitude||18.8792,e=t.value.longitude||47.5079;S=R.marker([A,e],{draggable:!0}).addTo(i),i.setView([A,e],15),i.on("click",g=>{S.setLatLng(g.latlng)})},we=async()=>{if(!oe.value){await Q("Veuillez compl√©ter tous les champs obligatoires","warning");return}M.value=!0;const A=await De.create({message:T.value?"Cr√©ation du signalement...":"Signalement du probl√®me...",spinner:"crescent"});try{if(await A.present(),T.value){const e=await p({latitude:t.value.latitude,longitude:t.value.longitude,typeId:t.value.typeId,description:t.value.description,surfaceM2:t.value.surfaceM2,budget:t.value.budget,entrepriseConcernee:t.value.entrepriseConcernee,isAnonymous:t.value.isAnonymous,photos:I.value.map(g=>({dataUrl:g.dataUrl,id:g.id}))});(e!=null&&e.success||e!=null&&e.id)&&(await Q("Signalement cr√©√© avec succ√®s !","success"),t.value={latitude:null,longitude:null,addressComplement:"",typeId:null,description:"",surfaceM2:null,budget:null,entrepriseConcernee:"",isAnonymous:!1},b.value={},f.value=1,k(),setTimeout(()=>{n.push("/map")},1500))}else{const e=await m({latitude:t.value.latitude,longitude:t.value.longitude,typeId:t.value.typeId||null,description:t.value.description});(e!=null&&e.success||e!=null&&e.id)&&(await Q("Probl√®me signal√© avec succ√®s ! Un manager va le traiter.","success"),t.value={latitude:null,longitude:null,addressComplement:"",typeId:null,description:"",surfaceM2:null,budget:null,entrepriseConcernee:"",isAnonymous:!1},b.value={},f.value=1,k(),setTimeout(()=>{n.push("/map")},1500))}}catch(e){console.error("Erreur lors de l'envoi:",e),await Q(e.message||"Erreur lors de l'envoi","danger")}finally{M.value=!1,await A.dismiss()}},Q=async(A,e="primary")=>{await(await _e.create({message:A,duration:3e3,color:e,position:"top"})).present()};return Ie(async()=>{try{await l()}catch(A){console.error("Erreur au chargement des types:",A),await Q("Erreur lors du chargement des types","danger")}ne()}),Ee(()=>{d&&(d.remove(),d=null),i&&(i.remove(),i=null)}),(A,e)=>(v(),_(o(Se),null,{default:r(()=>[s(o(se),null,{default:r(()=>[s(o(V),null,{default:r(()=>[s(o(q),{slot:"start"},{default:r(()=>[s(o(x),{"router-link":"/map"},{default:r(()=>[s(o(P),{name:"arrow-back"})]),_:1})]),_:1}),T.value?(v(),_(o(J),{key:0},{default:r(()=>[...e[4]||(e[4]=[w("Cr√©er un signalement",-1)])]),_:1})):(v(),_(o(J),{key:1},{default:r(()=>[...e[5]||(e[5]=[w("Signaler un probl√®me",-1)])]),_:1}))]),_:1}),s(o(V),{class:"progress-toolbar"},{default:r(()=>[u("div",Ne,[u("div",Oe,[u("div",{class:"progress-fill",style:$({width:`${pe.value}%`})},null,4)]),u("div",Ve,[(v(),U(re,null,ie(2,g=>u("div",{key:g,class:ue(["step-indicator",{active:f.value>=g,completed:f.value>g}])},[f.value>g?(v(),U("span",qe,[s(o(P),{name:"checkmark",size:"small"})])):(v(),U("span",$e,B(g),1))],2)),64))]),u("p",ze,B(me.value),1)])]),_:1})]),_:1}),s(o(ce),{fullscreen:!0,class:"form-content"},{default:r(()=>[f.value===1?(v(),U("div",We,[e[12]||(e[12]=u("div",{class:"step-header"},[u("h2",null,"O√π se trouve le probl√®me ?"),u("p",null,"Choisissez l'emplacement sur la carte ou utilisez votre position actuelle")],-1)),u("div",{class:"location-map",ref_key:"locationMapContainer",ref:j},null,512),u("div",Je,[s(o(x),{expand:"block",disabled:G.value,onClick:he,class:"location-button"},{default:r(()=>[G.value?(v(),_(o(de),{key:0,slot:"start",name:"crescent"})):(v(),_(o(P),{key:1,name:"locate",slot:"start"})),e[6]||(e[6]=w(" Utiliser ma position actuelle ",-1))]),_:1},8,["disabled"]),e[8]||(e[8]=u("div",{class:"or-divider"},[u("span",null,"ou")],-1)),s(o(x),{expand:"block",fill:"outline",onClick:ye,class:"location-button"},{default:r(()=>[s(o(P),{name:"map",slot:"start"}),e[7]||(e[7]=w(" Choisir sur la carte ",-1))]),_:1})]),u("div",Xe,[s(o(X),{class:"address-item"},{default:r(()=>[s(o(Z),{position:"floating"},{default:r(()=>[...e[9]||(e[9]=[w("Adresse compl√©mentaire (optionnel)",-1)])]),_:1}),s(o(Pe),{modelValue:t.value.addressComplement,"onUpdate:modelValue":e[0]||(e[0]=g=>t.value.addressComplement=g),placeholder:"Pr√©cisions sur l'emplacement"},null,8,["modelValue"])]),_:1}),t.value.latitude&&t.value.longitude?(v(),U("div",Ze,[u("p",null,[e[10]||(e[10]=u("strong",null,"Latitude:",-1)),w(" "+B(t.value.latitude.toFixed(5)),1)]),u("p",null,[e[11]||(e[11]=u("strong",null,"Longitude:",-1)),w(" "+B(t.value.longitude.toFixed(5)),1)])])):D("",!0)])])):D("",!0),f.value===2?(v(),U("div",et,[e[17]||(e[17]=u("div",{class:"step-header"},[u("h2",null,"D√©crivez le probl√®me"),u("p",null,"Soyez concis et pr√©cis (un manager verra votre signalement)")],-1)),s(o(X),{class:"form-item"},{default:r(()=>[s(o(Z),{position:"floating"},{default:r(()=>[...e[13]||(e[13]=[w("Description *",-1)])]),_:1}),s(o(Ke),{modelValue:t.value.description,"onUpdate:modelValue":e[1]||(e[1]=g=>t.value.description=g),placeholder:"Ex: Nid de poule sur la RN1, taille estim√©e 30cm...",counter:!0,maxlength:"300",rows:"4",onIonInput:e[2]||(e[2]=g=>ve("description")),class:ue({"ion-invalid":b.value.description})},null,8,["modelValue","class"]),b.value.description?(v(),_(o(Me),{key:0,slot:"error",color:"danger"},{default:r(()=>[w(B(b.value.description),1)]),_:1})):D("",!0)]),_:1}),s(o(X),null,{default:r(()=>[s(o(Z),null,{default:r(()=>[...e[14]||(e[14]=[w("Type de probl√®me (sugg√©r√©, optionnel)",-1)])]),_:1}),s(o(Qe),{modelValue:t.value.typeId,"onUpdate:modelValue":e[3]||(e[3]=g=>t.value.typeId=g),placeholder:"Pas de type sp√©cifique"},{default:r(()=>[s(o(Ae),{value:""},{default:r(()=>[...e[15]||(e[15]=[w("Pas de type",-1)])]),_:1}),(v(!0),U(re,null,ie(o(a),g=>(v(),_(o(Ae),{key:g.id,value:g.id},{default:r(()=>[u("span",{style:$({color:z(g.icon_color)})},B(g.icon_symbol)+" "+B(g.libelle),5)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),N.value?(v(),U("div",tt,[u("div",{class:"type-icon",style:$({borderColor:z(N.value.icon_color)})},B(N.value.icon_symbol),5),u("div",at,[u("h3",null,B(N.value.libelle),1),u("p",{style:$({color:z(N.value.icon_color)})}," Type sugg√©r√© ",4)])])):D("",!0),u("div",ot,[s(o(P),{name:"information-circle"}),e[16]||(e[16]=u("p",null,"Les d√©tails de conversion en signalement seront compl√©t√©s par un manager",-1))])])):D("",!0),s(o(xe),{"is-open":Y.value,onDidDismiss:W,class:"location-picker-modal"},{default:r(()=>[s(o(se),null,{default:r(()=>[s(o(V),null,{default:r(()=>[s(o(J),null,{default:r(()=>[...e[18]||(e[18]=[u("span",{class:"app-logo"},"ROAD ALERT",-1),u("span",{class:"title-sep"},"‚Ä¢",-1),u("span",{class:"app-title"},"Choisir l'emplacement",-1)])]),_:1}),s(o(q),{slot:"end"},{default:r(()=>[s(o(x),{onClick:W},{default:r(()=>[s(o(P),{name:"close"})]),_:1})]),_:1})]),_:1})]),_:1}),s(o(ce),null,{default:r(()=>[u("div",{class:"picker-map",ref_key:"pickerMapContainer",ref:H},null,512),u("div",lt,[s(o(x),{expand:"block",onClick:Ce},{default:r(()=>[...e[19]||(e[19]=[w(" Confirmer cet emplacement ",-1)])]),_:1})])]),_:1})]),_:1},8,["is-open"])]),_:1}),s(o(Ue),null,{default:r(()=>[s(o(V),null,{default:r(()=>[s(o(q),{slot:"start"},{default:r(()=>[f.value>1?(v(),_(o(x),{key:0,fill:"clear",onClick:fe,disabled:M.value},{default:r(()=>[s(o(P),{name:"arrow-back",slot:"start"}),e[20]||(e[20]=w(" Pr√©c√©dent ",-1))]),_:1},8,["disabled"])):D("",!0)]),_:1}),s(o(q),{slot:"end"},{default:r(()=>[f.value<3?(v(),_(o(x),{key:0,onClick:ge,disabled:!ae.value||M.value,class:"next-button"},{default:r(()=>[e[21]||(e[21]=w(" Suivant ",-1)),s(o(P),{name:"arrow-forward",slot:"end"})]),_:1},8,["disabled"])):D("",!0),f.value===3?(v(),_(o(x),{key:1,onClick:we,disabled:!oe.value||M.value,class:"submit-button"},{default:r(()=>[M.value?(v(),_(o(de),{key:0,slot:"start",name:"crescent"})):(v(),_(o(P),{key:1,name:"send",slot:"start"})),w(" "+B(T.value?"Cr√©er le signalement":"Signaler le probl√®me"),1)]),_:1},8,["disabled"])):D("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},At=Ye(nt,[["__scopeId","data-v-5df2b2b6"]]);export{At as default};
